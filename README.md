# Moon Runner — версия 2.0.0 (архитектура через реестр ассетов)

Этот проект переведён на **asset-driven архитектуру**: теперь все визуальные ресурсы описываются в одном JSON-реестре, а сцена автоматически выбирает — рисовать реальную картинку или цветной плейсхолдер.

## Что изменено в версии

- Убрана легаси-структура от шаблона Phaser/Vite и лишние сцены.
- Введён единый файл `src/config/assetRegistry.json` как источник правды для ассетов.
- Добавлена защита от отсутствующих файлов: игра не падает, а показывает цветные прямоугольники.
- Слои сцены жёстко закреплены по конфигу и глубине.
- Реальные изображения автоматически подхватываются после добавления в `public/assets/*` без правки кода.

## Установка и запуск

1. Установите зависимости:
   ```bash
   npm install
   ```
2. Запустите локально:
   ```bash
   npm run dev
   ```
3. Откройте адрес из терминала (обычно `http://localhost:5173`).

## Структура проекта

```text
/public
  /assets
    /background
    /player
    /obstacles

/src
  /config
    gameConfig.js
    assetRegistry.json
  /scenes
    RunnerScene.js
  main.js
```

## Как работает реестр ассетов

Файл: `src/config/assetRegistry.json`.

Каждая запись содержит:
- `path` — путь к файлу в `public`;
- `width`, `height` — размеры;
- `layer` — глубина отрисовки;
- `placeholderColor` — цвет плейсхолдера.

Пример сценария:
- Файл отсутствует — на его месте появляется прямоугольник указанного размера и цвета.
- Вы добавили PNG по нужному пути — после перезагрузки страницы плейсхолдер исчезает, показывается реальная текстура.

## Правила слоёв и земли

Снизу вверх:
1. Moon Foreground Cut
2. Moon Surface
3. Mountains
4. Player и препятствия

Линия земли задаётся в `GROUND_LINE_Y` (`src/config/gameConfig.js`).
- Ноги игрока всегда стоят ровно на этой линии.
- Наземные препятствия выравниваются по этой же линии.

## Параллакс

- `mountains` — медленный скролл.
- `moon_surface` — скролл с игровой скоростью.
- `background_cut` — быстрее гор, но ниже по смыслу, чем игровой слой.

Это позволяет сразу видеть глубину даже на одних плейсхолдерах.
