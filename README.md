# Moon Runner (Phaser + Vite)

Этот проект — каркас вертикального раннера на Phaser 3. Игра запускается даже без ассетов: если картинок нет, используются примитивы (прямоугольники), поэтому сборка не ломается.

## Установка и запуск

1. Установите зависимости: `npm install`
2. Запустите dev-сервер: `npm run dev`

## Куда класть ассеты

Структура папок:

```
public/assets/moonrunner/
  background/
    background.png       (540x960)
    stars.png            (540x960)
    mountains.png        (1080x60)
    moon_surface.png     (repeat-x, рекомендуется 1080x180)
    moon_foreground.png  (1080x100)
  player/
    player_sheet.png
    player_sheet.json
  obstacles/
    obstacles.png
    obstacles.json
  fx/
    meteor_flame.png
    meteor_flame.json
  ui/
    ui.png
    ui.json
```

Пять фоновых слоёв загружаются из `src/config/assetManifest.js`. Если какого-то файла нет, сцена автоматически подставит простую графику, и игра не сломается.

## Формат JSON для spritesheet

JSON содержит `frames` (x/y/w/h) и `anims` (fps/repeat). Хитбоксы автоматически подстраиваются под размер текущего кадра, поэтому можно использовать PNG разумного размера без ручной подгонки.

## High Score

Лучший результат хранится локально в `localStorage` браузера и автоматически обновляется, когда вы набираете больше очков, чем раньше.

## Гарантия «честных» препятствий

Спавн идёт по сегментам фиксированной ширины. Для каждого сегмента выбирается паттерн препятствий и проверяются правила совместимости (например, кратер не ставится вместе с низким метеоритом, а серии «обязательных прыжков» ограничены). Если паттерн не проходит валидацию, он заменяется на пустой.
