# Moon Runner (Phaser + Vite)

Этот проект — каркас вертикального раннера на Phaser 3. Игра запускается даже без ассетов: если картинок нет, используются примитивы (прямоугольники), поэтому сборка не ломается.

## Установка и запуск

1. Установите зависимости: `npm install`
2. Запустите dev-сервер: `npm run dev`

## Куда класть ассеты

Структура папок:

```
public/assets/moonrunner/
  backgrounds/
    bg_sky.png
    bg_far_craters.png
    bg_ground.png
  player/
    player_sheet.png
    player_sheet.json
  obstacles/
    obstacles.png
    obstacles.json
  fx/
    meteor_flame.png
    meteor_flame.json
  ui/
    ui.png
    ui.json
```

Ассеты подтягиваются автоматически по `src/config/assetManifest.js`. Если чего-то нет, игра продолжит работать на плейсхолдерах.

## Формат JSON для spritesheet

JSON содержит `frames` (x/y/w/h) и `anims` (fps/repeat). Хитбоксы автоматически подстраиваются под размер текущего кадра, поэтому можно использовать PNG разумного размера без ручной подгонки.

## High Score

Лучший результат хранится локально в `localStorage` браузера и автоматически обновляется, когда вы набираете больше очков, чем раньше.

## Гарантия «честных» препятствий

Спавн идёт по сегментам фиксированной ширины. Для каждого сегмента выбирается паттерн препятствий и проверяются правила совместимости (например, кратер не ставится вместе с низким метеоритом, а серии «обязательных прыжков» ограничены). Если паттерн не проходит валидацию, он заменяется на пустой.
